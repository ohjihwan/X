<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<title>íšŒì›ê°€ì…</title>
</head>
<body>
<h1>íšŒì›ê°€ì… </h1>
<form id="signup-form">
	<input type="text" id="userid" placeholder="ì•„ì´ë””" required><br>
	<input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required><br>
	<input type="text" id="name" placeholder="ì´ë¦„" required><br>
	<input type="email" id="email" placeholder="ì´ë©”ì¼" required><br>
	<button type="submit">íšŒì›ê°€ì…</button>
</form>

<script>
	const form = document.getElementById('signup-form');

	form.addEventListener('submit', async (e) => {
	e.preventDefault();

	const userid = document.getElementById('userid').value;
	const password = document.getElementById('password').value;
	const name = document.getElementById('name').value;
	const email = document.getElementById('email').value;

	if (!userid || !password || !name || !email) {
		alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”.');
		return;
	}

	try {
		const response = await fetch('http://127.0.0.1:8080/auth/signup', {
		method: 'POST',
		headers: {
			'Content-Type': 'application/json'
		},
			body: JSON.stringify({ userid, password, name, email })
		});

		const data = await response.json();

		if (response.ok) {
			alert('íšŒì›ê°€ì… ì„±ê³µ! ğŸ‰');

			// ğŸ¯ í† í° ì €ì¥ (ì„ íƒì‚¬í•­)
			localStorage.setItem('token', data.token);
			localStorage.setItem('userid', data.userid);

			// ğŸ¯ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
			window.location.href = 'login.html';
		} else {
			alert(`íšŒì›ê°€ì… ì‹¤íŒ¨: ${data.message || 'ì„œë²„ ì˜¤ë¥˜'}`);
		}
	} catch (error) {
		alert('íšŒì›ê°€ì… ìš”ì²­ ì‹¤íŒ¨: ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜');
		console.error(error);
	}
	});
</script>
</body>
</html>
